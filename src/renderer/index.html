<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NOVA - The Collective Mind</title>
  <link rel="stylesheet" href="styles/nova.css">
</head>
<body>
  <div class="app">
    <header class="app-header">
      <div class="logo">
        <img src="/logo-brain.jpg" alt="NOVA" class="logo-img" height="40">
        <span class="logo-text">NOVA</span>
      </div>
      <nav class="main-nav">
        <button class="nav-btn active" data-tab="dashboard">Dashboard</button>
        <button class="nav-btn" data-tab="goals">Goals</button>
        <button class="nav-btn" data-tab="tasks">Tasks</button>
        <button class="nav-btn" data-tab="projects">Projects</button>
        <button class="nav-btn" data-tab="workflows">Workflows</button>
        <button class="nav-btn" data-tab="habits">Habits</button>
        <button class="nav-btn" data-tab="memory">Memory</button>
        <button class="nav-btn" data-tab="network">Network</button>
        <button class="nav-btn" data-tab="counsel">Counsel</button>
        <button class="nav-btn" data-tab="learning">Learning</button>
      </nav>
      <div class="header-actions">
        <div class="sync-status" id="syncStatus">
          <span class="sync-icon">‚ü≥</span>
          <span class="sync-text">Loading...</span>
        </div>
        <button class="btn-icon" id="searchBtn">üîç</button>
        <button class="btn-icon" id="notifBtn">üîî</button>
        <div class="user-avatar">N</div>
      </div>
    </header>

    <main class="app-content">
      <!-- DASHBOARD TAB -->
      <section class="tab-panel active" id="dashboard">
        <div class="dashboard-grid">
          <div class="dash-card welcome">
            <h2>Good <span id="timeGreeting">Day</span>, Nick</h2>
            <p class="date" id="currentDate">Loading...</p>

            <!-- Quick Action Buttons -->
            <div class="quick-actions">
              <button class="quick-action-btn" id="quickTaskBtn">+ New Task</button>
              <button class="quick-action-btn" id="quickHabitBtn">+ Log Habit</button>
              <button class="quick-action-btn" id="quickCounselBtn">+ Counsel</button>
            </div>

            <div class="daily-focus">
              <h3>Today's Focus</h3>
              <div id="dailyGoalsPreview">
                <div class="loading">Loading goals...</div>
              </div>
            </div>
          </div>

          <div class="dash-card stats">
            <h3>Week at a Glance</h3>
            <div class="stat-row">
              <div class="stat">
                <span class="stat-value" id="tasksCompleted">0</span>
                <span class="stat-label">Tasks Done</span>
              </div>
              <div class="stat">
                <span class="stat-value" id="tasksTotal">0</span>
                <span class="stat-label">Total</span>
              </div>
              <div class="stat">
                <span class="stat-value" id="habitStreak">0</span>
                <span class="stat-label">Day Streak</span>
              </div>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" id="weekProgress" style="width: 0%"></div>
            </div>
          </div>

          <!-- Urgent/Attention Widget -->
          <div class="dash-card urgent-items">
            <h3>üî¥ Urgent <span id="urgentCount" class="badge">0</span></h3>
            <div id="urgentList">
              <div class="loading">Loading...</div>
            </div>
          </div>

          <!-- Skills Building Widget -->
          <div class="dash-card skills-progress">
            <h3>‚ö° Skills Building</h3>
            <div id="skillsList">
              <div class="loading">Loading...</div>
            </div>
          </div>

          <!-- Suggestions Widget -->
          <div class="dash-card suggestions">
            <h3>üí° Axiom Suggests</h3>
            <div id="suggestionsList">
              <div class="loading">Loading...</div>
            </div>
          </div>

          <div class="dash-card active-projects">
            <h3>Active Projects</h3>
            <div id="projectsPreview">
              <div class="loading">Loading projects...</div>
            </div>
          </div>
        </div>
      </section>

      <!-- GOALS TAB -->
      <section class="tab-panel" id="goals">
        <div class="tab-header">
          <h2>Goals</h2>
          <div class="goals-header-actions">
            <div class="goals-filters">
              <button class="goal-filter-btn active" data-filter="all">All</button>
              <button class="goal-filter-btn" data-filter="business">Business</button>
              <button class="goal-filter-btn" data-filter="tech">Tech</button>
              <button class="goal-filter-btn" data-filter="health">Health</button>
              <button class="goal-filter-btn" data-filter="finance">Finance</button>
              <button class="goal-filter-btn" data-filter="personal">Personal</button>
            </div>
            <button class="btn-secondary" id="showArchivedBtn">üì¶ Show Archived</button>
          </div>
        </div>

        <div class="goals-grid">
          <!-- SHORT-TERM COLUMN -->
          <div class="goals-column" data-timeframe="short">
            <div class="column-header">
              <h3>Short-term</h3>
              <span class="column-subtitle">(1-90 days)</span>
            </div>
            <div class="goals-list" id="goalsShortTerm" data-timeframe="short">
              <div class="loading">Loading goals...</div>
            </div>
            <button class="add-goal-btn" data-timeframe="short">+ Add Goal</button>
          </div>

          <!-- MID-TERM COLUMN -->
          <div class="goals-column" data-timeframe="mid">
            <div class="column-header">
              <h3>Mid-term</h3>
              <span class="column-subtitle">(6-12 months)</span>
            </div>
            <div class="goals-list" id="goalsMidTerm" data-timeframe="mid">
              <div class="loading">Loading goals...</div>
            </div>
            <button class="add-goal-btn" data-timeframe="mid">+ Add Goal</button>
          </div>

          <!-- LONG-TERM COLUMN -->
          <div class="goals-column" data-timeframe="long">
            <div class="column-header">
              <h3>Long-term</h3>
              <span class="column-subtitle">(2-5 years)</span>
            </div>
            <div class="goals-list" id="goalsLongTerm" data-timeframe="long">
              <div class="loading">Loading goals...</div>
            </div>
            <button class="add-goal-btn" data-timeframe="long">+ Add Goal</button>
          </div>
        </div>
      </section>

      <!-- GOAL DETAIL VIEW MODAL -->
      <div class="goal-detail-modal" id="goalDetailModal">
        <div class="goal-detail-content">
          <button class="goal-detail-close">&times;</button>
          <div class="goal-detail-header">
            <button class="btn-link goal-back-btn">‚Üê Back to Goals</button>
          </div>
          <div id="goalDetailBody">
            <!-- Dynamic content loaded here -->
          </div>
        </div>
      </div>

      <!-- CREATE GOAL WORKFLOW MODAL -->
      <div class="create-goal-modal" id="createGoalModal">
        <div class="create-goal-content">
          <button class="create-goal-close">&times;</button>
          <div class="create-goal-header">
            <h2>Create New Goal</h2>
            <div class="step-indicator">
              <span class="step active" data-step="1">1</span>
              <span class="step" data-step="2">2</span>
              <span class="step" data-step="3">3</span>
              <span class="step" data-step="4">4</span>
              <span class="step" data-step="5">5</span>
              <span class="step" data-step="6">6</span>
              <span class="step" data-step="7">7</span>
              <span class="step" data-step="8">8</span>
            </div>
          </div>
          <div class="create-goal-body" id="createGoalBody">
            <!-- Step 1: What's your goal? -->
            <div class="goal-step active" data-step="1">
              <h3>What's your goal?</h3>
              <input type="text" id="newGoalTitle" placeholder="Enter your goal..." class="goal-input-large">
            </div>

            <!-- Step 2: Timeframe -->
            <div class="goal-step" data-step="2">
              <h3>Timeframe</h3>
              <div class="radio-group">
                <label class="radio-option">
                  <input type="radio" name="goalTimeframe" value="short">
                  <span>Short-term (1-90 days)</span>
                </label>
                <label class="radio-option">
                  <input type="radio" name="goalTimeframe" value="mid">
                  <span>Mid-term (6-12 months)</span>
                </label>
                <label class="radio-option">
                  <input type="radio" name="goalTimeframe" value="long">
                  <span>Long-term (2-5 years)</span>
                </label>
              </div>
            </div>

            <!-- Step 3: Priority -->
            <div class="goal-step" data-step="3">
              <h3>Priority</h3>
              <div class="radio-group">
                <label class="radio-option priority-high">
                  <input type="radio" name="goalPriority" value="high">
                  <span>üî¥ High</span>
                </label>
                <label class="radio-option priority-medium">
                  <input type="radio" name="goalPriority" value="medium">
                  <span>üü° Medium</span>
                </label>
                <label class="radio-option priority-low">
                  <input type="radio" name="goalPriority" value="low">
                  <span>üü¢ Low</span>
                </label>
              </div>
            </div>

            <!-- Step 4: Due Date -->
            <div class="goal-step" data-step="4">
              <h3>Target completion date?</h3>
              <input type="date" id="newGoalDueDate" class="goal-input">
            </div>

            <!-- Step 5: Parent Goal -->
            <div class="goal-step" data-step="5">
              <h3>Does this support a larger goal?</h3>
              <div class="radio-group">
                <label class="radio-option">
                  <input type="radio" name="goalParent" value="standalone" checked>
                  <span>Standalone goal</span>
                </label>
                <label class="radio-option">
                  <input type="radio" name="goalParent" value="supports">
                  <span>Supports a larger goal</span>
                </label>
              </div>
              <select id="newGoalParent" class="goal-input" style="display: none; margin-top: 12px;">
                <option value="">Select parent goal...</option>
                <!-- Populated dynamically -->
              </select>
            </div>

            <!-- Step 6: Category Tags -->
            <div class="goal-step" data-step="6">
              <h3>Category tags</h3>
              <div class="checkbox-group">
                <label class="checkbox-option">
                  <input type="checkbox" name="goalTags" value="business">
                  <span>Business</span>
                </label>
                <label class="checkbox-option">
                  <input type="checkbox" name="goalTags" value="health">
                  <span>Health</span>
                </label>
                <label class="checkbox-option">
                  <input type="checkbox" name="goalTags" value="personal">
                  <span>Personal</span>
                </label>
                <label class="checkbox-option">
                  <input type="checkbox" name="goalTags" value="tech">
                  <span>Tech</span>
                </label>
                <label class="checkbox-option">
                  <input type="checkbox" name="goalTags" value="finance">
                  <span>Finance</span>
                </label>
                <label class="checkbox-option">
                  <input type="checkbox" name="goalTags" value="family">
                  <span>Family</span>
                </label>
              </div>
              <div style="margin-top: 12px;">
                <input type="text" id="newGoalCustomTag" placeholder="Other tag..." class="goal-input">
              </div>
            </div>

            <!-- Step 7: Description -->
            <div class="goal-step" data-step="7">
              <h3>How will you measure success?</h3>
              <textarea id="newGoalDescription" rows="5" placeholder="Describe how you'll know you've achieved this goal..." class="goal-textarea"></textarea>
            </div>

            <!-- Step 8: Link Habits -->
            <div class="goal-step" data-step="8">
              <h3>Link supporting habits? (optional)</h3>
              <div class="checkbox-group" id="habitsList">
                <!-- Populated dynamically -->
              </div>
            </div>
          </div>
          <div class="create-goal-footer">
            <button class="btn-secondary" id="createGoalBackBtn" style="display: none;">‚Üê Back</button>
            <button class="btn-primary" id="createGoalNextBtn">Next ‚Üí</button>
            <button class="btn-primary" id="createGoalSubmitBtn" style="display: none;">Create Goal</button>
          </div>
        </div>
      </div>

      <!-- TASKS TAB -->
      <section class="tab-panel" id="tasks">
        <div class="tab-header">
          <div>
            <h2>This Week's Tasks</h2>
            <p class="week-range" id="weekRange">Loading...</p>
          </div>
          <div class="tasks-header-actions">
            <div class="tasks-filters">
              <select id="priorityFilter" class="filter-select">
                <option value="all">Priority: All</option>
                <option value="high">High</option>
                <option value="medium">Medium</option>
                <option value="low">Low</option>
              </select>
              <select id="categoryFilter" class="filter-select">
                <option value="all">Category: All</option>
                <!-- Populated dynamically from /api/categories -->
              </select>
            </div>
            <div class="tasks-weekly-actions">
              <button class="btn-secondary btn-sm" id="rolloverBtn">üîÑ Rollover</button>
              <button class="btn-secondary btn-sm" id="viewPushedTasksBtn">‚Üí Pushed</button>
              <button class="btn-secondary btn-sm" id="viewArchivedTasksBtn">üì¶ Archived</button>
              <button class="btn-secondary btn-sm" id="clearWeekBtn">üóëÔ∏è Clear Week</button>
              <button class="btn-primary btn-sm" id="addTaskBtn">+ Add Task</button>
            </div>
          </div>
        </div>

        <div class="tasks-kanban">
          <!-- Monday -->
          <div class="kanban-column" data-day="Monday">
            <div class="column-header">
              <div class="day-name">MON</div>
              <div class="day-date" id="date-Monday">-</div>
            </div>
            <div class="tasks-list" id="tasks-Monday" data-day="Monday">
              <div class="loading">Loading...</div>
            </div>
            <button class="add-task-day-btn" data-day="Monday">+ Add</button>
          </div>

          <!-- Tuesday -->
          <div class="kanban-column" data-day="Tuesday">
            <div class="column-header">
              <div class="day-name">TUE</div>
              <div class="day-date" id="date-Tuesday">-</div>
            </div>
            <div class="tasks-list" id="tasks-Tuesday" data-day="Tuesday">
              <div class="loading">Loading...</div>
            </div>
            <button class="add-task-day-btn" data-day="Tuesday">+ Add</button>
          </div>

          <!-- Wednesday -->
          <div class="kanban-column" data-day="Wednesday">
            <div class="column-header">
              <div class="day-name">WED</div>
              <div class="day-date" id="date-Wednesday">-</div>
            </div>
            <div class="tasks-list" id="tasks-Wednesday" data-day="Wednesday">
              <div class="loading">Loading...</div>
            </div>
            <button class="add-task-day-btn" data-day="Wednesday">+ Add</button>
          </div>

          <!-- Thursday -->
          <div class="kanban-column" data-day="Thursday">
            <div class="column-header">
              <div class="day-name">THU</div>
              <div class="day-date" id="date-Thursday">-</div>
            </div>
            <div class="tasks-list" id="tasks-Thursday" data-day="Thursday">
              <div class="loading">Loading...</div>
            </div>
            <button class="add-task-day-btn" data-day="Thursday">+ Add</button>
          </div>

          <!-- Friday -->
          <div class="kanban-column" data-day="Friday">
            <div class="column-header">
              <div class="day-name">FRI</div>
              <div class="day-date" id="date-Friday">-</div>
            </div>
            <div class="tasks-list" id="tasks-Friday" data-day="Friday">
              <div class="loading">Loading...</div>
            </div>
            <button class="add-task-day-btn" data-day="Friday">+ Add</button>
          </div>

          <!-- Saturday -->
          <div class="kanban-column" data-day="Saturday">
            <div class="column-header">
              <div class="day-name">SAT</div>
              <div class="day-date" id="date-Saturday">-</div>
            </div>
            <div class="tasks-list" id="tasks-Saturday" data-day="Saturday">
              <div class="loading">Loading...</div>
            </div>
            <button class="add-task-day-btn" data-day="Saturday">+ Add</button>
          </div>

          <!-- Sunday -->
          <div class="kanban-column" data-day="Sunday">
            <div class="column-header">
              <div class="day-name">SUN</div>
              <div class="day-date" id="date-Sunday">-</div>
            </div>
            <div class="tasks-list" id="tasks-Sunday" data-day="Sunday">
              <div class="loading">Loading...</div>
            </div>
            <button class="add-task-day-btn" data-day="Sunday">+ Add</button>
          </div>
        </div>
      </section>

      <!-- TASK MODAL -->
      <div class="task-modal" id="taskModal">
        <div class="task-modal-content">
          <button class="task-modal-close">&times;</button>
          <h2 id="taskModalTitle">Add Task</h2>
          <div class="task-modal-body">
            <div class="form-group">
              <label>Task</label>
              <input type="text" id="taskTitleInput" placeholder="Enter task..." class="form-input">
            </div>

            <div class="form-group">
              <label>Day</label>
              <div class="day-radio-group">
                <label class="radio-option"><input type="radio" name="taskDay" value="Monday"> Mon</label>
                <label class="radio-option"><input type="radio" name="taskDay" value="Tuesday"> Tue</label>
                <label class="radio-option"><input type="radio" name="taskDay" value="Wednesday"> Wed</label>
                <label class="radio-option"><input type="radio" name="taskDay" value="Thursday"> Thu</label>
                <label class="radio-option"><input type="radio" name="taskDay" value="Friday"> Fri</label>
                <label class="radio-option"><input type="radio" name="taskDay" value="Saturday"> Sat</label>
                <label class="radio-option"><input type="radio" name="taskDay" value="Sunday"> Sun</label>
              </div>
            </div>

            <div class="form-group">
              <label>Priority</label>
              <div class="priority-radio-group">
                <label class="radio-option priority-high"><input type="radio" name="taskPriority" value="high"> üî¥ High</label>
                <label class="radio-option priority-medium"><input type="radio" name="taskPriority" value="medium" checked> üü° Medium</label>
                <label class="radio-option priority-low"><input type="radio" name="taskPriority" value="low"> üü¢ Low</label>
              </div>
            </div>

            <div class="form-group">
              <label>Category</label>
              <select id="taskCategoryInput" class="form-input">
                <option value="">Select category...</option>
                <!-- Populated dynamically -->
              </select>
            </div>

            <div class="form-group">
              <label>Supports Project (optional)</label>
              <select id="taskProjectInput" class="form-input">
                <option value="">None</option>
                <!-- Populated dynamically -->
              </select>
            </div>

            <div class="form-group">
              <label>Supports Goal (optional)</label>
              <select id="taskGoalInput" class="form-input">
                <option value="">None</option>
                <!-- Populated dynamically -->
              </select>
            </div>

            <div class="form-group">
              <label>Description (optional)</label>
              <textarea id="taskDescriptionInput" rows="3" placeholder="Add task details..." class="form-input"></textarea>
            </div>

            <!-- Project Tasks List (shown when project is selected) -->
            <div class="form-group" id="projectTasksGroup" style="display: none;">
              <label>Existing Project Tasks</label>
              <div id="projectTasksList" class="project-tasks-preview"></div>
            </div>
          </div>
          <div class="task-modal-footer">
            <button class="btn-secondary" id="taskModalCancel">Cancel</button>
            <button class="btn-primary" id="taskModalSave">Save</button>
          </div>
        </div>
      </div>

      <!-- PROJECTS TAB -->
      <section class="tab-panel" id="projects">
        <div class="tab-header">
          <h2>Projects</h2>
          <div style="display: flex; gap: 12px;">
            <select id="projectCategoryFilter" class="filter-select">
              <option value="all">Category: All</option>
              <option value="Business">Business</option>
              <option value="Tech">Tech</option>
              <option value="Personal">Personal</option>
              <option value="Health">Health</option>
              <option value="Finance">Finance</option>
            </select>
            <button class="btn-primary" id="newProjectBtn">+ New Project</button>
          </div>
        </div>

        <div class="projects-kanban">
          <!-- Backlog Column -->
          <div class="projects-column" data-status="backlog">
            <div class="column-header">
              <h3>Backlog</h3>
              <span class="column-count" id="count-backlog">0</span>
            </div>
            <div class="projects-list" id="projects-backlog" data-status="backlog">
              <div class="loading">Loading...</div>
            </div>
            <button class="add-project-btn" data-status="backlog">+ Add</button>
          </div>

          <!-- In Progress Column -->
          <div class="projects-column" data-status="in-progress">
            <div class="column-header">
              <h3>In Progress</h3>
              <span class="column-count" id="count-in-progress">0</span>
            </div>
            <div class="projects-list" id="projects-in-progress" data-status="in-progress">
              <div class="loading">Loading...</div>
            </div>
            <button class="add-project-btn" data-status="in-progress">+ Add</button>
          </div>

          <!-- Review Column -->
          <div class="projects-column" data-status="review">
            <div class="column-header">
              <h3>Review</h3>
              <span class="column-count" id="count-review">0</span>
            </div>
            <div class="projects-list" id="projects-review" data-status="review">
              <div class="loading">Loading...</div>
            </div>
            <button class="add-project-btn" data-status="review">+ Add</button>
          </div>

          <!-- Done Column -->
          <div class="projects-column" data-status="done">
            <div class="column-header">
              <h3>Done</h3>
              <span class="column-count" id="count-done">0</span>
            </div>
            <div class="projects-list" id="projects-done" data-status="done">
              <div class="loading">Loading...</div>
            </div>
            <button class="add-project-btn" data-status="done">+ Add</button>
          </div>

          <!-- Archived Column -->
          <div class="projects-column" data-status="archived">
            <div class="column-header">
              <h3>Archived</h3>
              <span class="column-count" id="count-archived">0</span>
            </div>
            <div class="projects-list" id="projects-archived" data-status="archived">
              <div class="loading">Loading...</div>
            </div>
            <button class="add-project-btn" data-status="archived">+ Add</button>
          </div>
        </div>
      </section>

      <!-- PROJECT DETAIL MODAL -->
      <div class="project-detail-modal" id="projectDetailModal">
        <div class="project-detail-content">
          <button class="project-detail-close">&times;</button>
          <div id="projectDetailBody">
            <!-- Dynamic content loaded here -->
          </div>
        </div>
      </div>

      <!-- CREATE/EDIT PROJECT MODAL -->
      <div class="project-edit-modal" id="projectEditModal">
        <div class="project-edit-content">
          <button class="project-edit-close">&times;</button>
          <h2 id="projectEditTitle">Create Project</h2>
          <div class="project-edit-body">
            <div class="form-group">
              <label>Project Name</label>
              <input type="text" id="projectNameInput" placeholder="Enter project name..." class="form-input">
            </div>
            <div class="form-group">
              <label>Description</label>
              <textarea id="projectDescriptionInput" rows="3" placeholder="Brief description..." class="form-input"></textarea>
            </div>
            <div class="form-group">
              <label>Category</label>
              <select id="projectCategoryInput" class="form-input">
                <option value="Business">üíº Business</option>
                <option value="Tech">üíª Tech</option>
                <option value="Personal">üë§ Personal</option>
                <option value="Health">‚ù§Ô∏è Health</option>
                <option value="Finance">üí∞ Finance</option>
              </select>
            </div>
            <div class="form-group">
              <label>Deadline (optional)</label>
              <input type="date" id="projectDeadlineInput" class="form-input">
            </div>
            <div class="form-group">
              <label>Supports Goal (optional)</label>
              <select id="projectGoalInput" class="form-input">
                <option value="">None</option>
                <!-- Populated dynamically -->
              </select>
            </div>
            <div class="form-group">
              <label>Status</label>
              <div class="radio-group">
                <label class="radio-option"><input type="radio" name="projectStatus" value="backlog" checked> Backlog</label>
                <label class="radio-option"><input type="radio" name="projectStatus" value="in-progress"> In Progress</label>
                <label class="radio-option"><input type="radio" name="projectStatus" value="review"> Review</label>
                <label class="radio-option"><input type="radio" name="projectStatus" value="done"> Done</label>
              </div>
            </div>
          </div>
          <div class="project-edit-footer">
            <button class="btn-secondary" id="projectEditCancel">Cancel</button>
            <button class="btn-primary" id="projectEditSave">Save</button>
          </div>
        </div>
      </div>

      <!-- ADD BACKLOG TASK MODAL -->
      <div class="backlog-task-modal" id="backlogTaskModal">
        <div class="backlog-task-content">
          <button class="backlog-task-close">&times;</button>
          <h2>Add Backlog Task</h2>
          <div class="backlog-task-body">
            <div class="form-group">
              <label>Task Title *</label>
              <input type="text" id="backlogTaskTitleInput" placeholder="Enter task title..." class="form-input">
            </div>
            <div class="form-group">
              <label>Description</label>
              <textarea id="backlogTaskDescriptionInput" placeholder="Enter task description (optional)..." class="form-textarea" rows="3"></textarea>
            </div>
            <div class="form-group">
              <label>Priority</label>
              <select id="backlogTaskPriorityInput" class="form-select">
                <option value="high">üî¥ High</option>
                <option value="medium" selected>üü° Medium</option>
                <option value="low">üü¢ Low</option>
              </select>
            </div>
            <div class="form-group">
              <label>Project</label>
              <input type="text" id="backlogTaskProjectName" class="form-input" readonly>
            </div>
          </div>
          <div class="backlog-task-footer">
            <button class="btn-secondary" id="backlogTaskCancel">Cancel</button>
            <button class="btn-primary" id="backlogTaskSave">Add to Backlog</button>
          </div>
        </div>
      </div>

      <!-- TASK DETAIL MODAL -->
      <div class="task-detail-modal" id="taskDetailModal">
        <div class="task-detail-content">
          <button class="task-detail-close">&times;</button>
          <div id="taskDetailBody">
            <!-- Dynamic content loaded here -->
          </div>
        </div>
      </div>

      <!-- WORKFLOWS TAB -->
      <section class="tab-panel" id="workflows">
        <div class="tab-header">
          <h2>Workflows & SOPs</h2>
          <div style="display: flex; gap: 12px;">
            <button class="btn-secondary" id="toggleArchivedWorkflowsBtn">üì¶ Show Archived</button>
            <button class="btn-primary" id="newWorkflowBtn">+ New Workflow</button>
          </div>
        </div>
        <div id="workflowsList" class="workflows-grid"></div>
      </section>

      <!-- WORKFLOW DETAIL MODAL -->
      <div class="workflow-detail-modal" id="workflowDetailModal">
        <div class="workflow-detail-content">
          <button class="workflow-detail-close">&times;</button>
          <div id="workflowDetailBody">
            <!-- Dynamic content loaded here -->
          </div>
        </div>
      </div>

      <!-- CREATE/EDIT WORKFLOW MODAL -->
      <div class="workflow-edit-modal" id="workflowEditModal">
        <div class="workflow-edit-content">
          <button class="workflow-edit-close">&times;</button>
          <h2 id="workflowEditTitle">Create Workflow</h2>
          <div class="workflow-edit-body">
            <div class="form-group">
              <label>Workflow Name</label>
              <input type="text" id="workflowNameInput" placeholder="Enter workflow name..." class="form-input">
            </div>
            <div class="form-group">
              <label>Category</label>
              <select id="workflowCategoryInput" class="form-input">
                <option value="Operations">Operations</option>
                <option value="Sales">Sales</option>
                <option value="Tech">Tech</option>
                <option value="Personal">Personal</option>
                <option value="Health">Health</option>
                <option value="Finance">Finance</option>
                <option value="Learning">Learning</option>
              </select>
            </div>
            <div class="form-group">
              <label>Description</label>
              <textarea id="workflowDescriptionInput" rows="3" placeholder="Brief description..." class="form-input"></textarea>
            </div>
            <div class="form-group">
              <label>Steps (one per line)</label>
              <textarea id="workflowStepsInput" rows="8" placeholder="1. First step&#10;2. Second step&#10;3. Third step..." class="form-input"></textarea>
            </div>
          </div>
          <div class="workflow-edit-footer">
            <button class="btn-secondary" id="workflowEditCancel">Cancel</button>
            <button class="btn-primary" id="workflowEditSave">Save</button>
          </div>
        </div>
      </div>

      <!-- HABITS TAB -->
      <section class="tab-panel" id="habits">
        <div class="tab-header">
          <h2>Habit Tracker</h2>
          <button class="btn-primary" id="newHabitBtn">+ New Habit</button>
        </div>
        <div id="habitsList" class="habits-list"></div>
      </section>

      <!-- MEMORY TAB -->
      <section class="tab-panel" id="memory">
        <div class="tab-header">
          <h2>Memory</h2>
          <div class="memory-actions">
            <input type="text" id="memorySearch" placeholder="Search memory..." class="search-input">
            <button class="btn-primary" id="quickAddMemory">+ Quick Add</button>
          </div>
        </div>
        
        <div class="memory-layout">
          <aside class="memory-sidebar">
            <div class="filter-group">
              <h4>Filter</h4>
              <button class="filter-link active" data-filter="all">All Entries</button>
              <button class="filter-link" data-filter="decision">Decisions</button>
              <button class="filter-link" data-filter="insight">Insights</button>
              <button class="filter-link" data-filter="project_update">Projects</button>
              <button class="filter-link" data-filter="people">People</button>
            </div>
            <div class="filter-group">
              <h4>Tags</h4>
              <div id="tagsList" class="tags-list"></div>
            </div>
          </aside>
          <div id="memoryTimeline" class="memory-timeline"></div>
        </div>
      </section>

      <!-- NETWORK TAB -->
      <section class="tab-panel" id="network">
        <div class="tab-header">
          <h2>Network CRM</h2>
          <button class="btn-primary" id="newContactBtn">+ Add Contact</button>
        </div>
        
        <div class="network-layout">
          <!-- Touch Reminders -->
          <div class="network-section touch-reminders">
            <h3>‚ö†Ô∏è Touch Needed</h3>
            <div id="touchRemindersList"></div>
          </div>
          
          <!-- Network Metrics -->
          <div class="network-section metrics-grid">
            <div class="metric-card">
              <span class="metric-value" id="totalContacts">0</span>
              <span class="metric-label">Contacts</span>
            </div>
            <div class="metric-card">
              <span class="metric-value" id="strongRelations">0</span>
              <span class="metric-label">Strong Relationships</span>
            </div>
            <div class="metric-card">
              <span class="metric-value" id="dealSources">0</span>
              <span class="metric-label">Deal Sources</span>
            </div>
            <div class="metric-card highlight">
              <span class="metric-value" id="totalDealValue">$0</span>
              <span class="metric-label">Total Deal Value</span>
            </div>
          </div>
          
          <!-- Top Deal Sources -->
          <div class="network-section deal-sources">
            <h3>üí∞ Top Deal Sources</h3>
            <div id="topDealSourcesList"></div>
          </div>
          
          <!-- Contacts List -->
          <div class="network-section contacts-list">
            <div class="contacts-filter">
              <button class="filter-btn active" data-filter="all">All</button>
              <button class="filter-btn" data-filter="mentor">Mentors</button>
              <button class="filter-btn" data-filter="partner">Partners</button>
              <button class="filter-btn" data-filter="deal_source">Deal Sources</button>
            </div>
            <div id="contactsGrid" class="contacts-grid"></div>
          </div>
        </div>
      </section>

      <!-- COUNSEL TAB -->
      <section class="tab-panel" id="counsel">
        <div class="tab-header">
          <h2>AI Counsel - Multi-Agent Advisory</h2>
          <button class="btn-primary" id="newCounselBtn">+ New Session</button>
        </div>

        <div class="counsel-layout">
          <!-- Sessions Filter -->
          <div class="counsel-filters">
            <button class="filter-btn active" data-filter="all">All Sessions</button>
            <button class="filter-btn" data-filter="pending">Pending</button>
            <button class="filter-btn" data-filter="in-progress">In Progress</button>
            <button class="filter-btn" data-filter="completed">Completed</button>
          </div>

          <!-- Sessions List -->
          <div id="counselSessionsList" class="counsel-sessions-list"></div>

          <!-- Session Detail View (hidden by default) -->
          <div id="counselSessionDetail" class="counsel-session-detail" style="display: none;">
            <button class="btn-secondary" id="backToSessions">‚Üê Back to Sessions</button>
            <div id="sessionDetailContent"></div>
          </div>
        </div>
      </section>

      <!-- LEARNING TAB -->
      <section class="tab-panel" id="learning">
        <div class="tab-header">
          <h2>Learning System</h2>
          <div class="learning-subtabs">
            <button class="subtab-btn active" data-subtab="books">üìö Books</button>
            <button class="subtab-btn" data-subtab="courses">üéì Courses</button>
            <button class="subtab-btn" data-subtab="skills">‚ö° Skills</button>
            <button class="subtab-btn" data-subtab="insights">üí° Insights</button>
            <button class="subtab-btn" data-subtab="mistakes">üî• Mistakes</button>
            <button class="subtab-btn" data-subtab="weekly">üìÖ Weekly</button>
          </div>
        </div>

        <!-- Books Subtab -->
        <div class="learning-subtab active" id="subtab-books">
          <div class="subtab-actions">
            <button class="btn-primary" id="addBookBtn">+ Add Book</button>
          </div>
          <div class="learning-filters">
            <button class="filter-btn active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="reading">Reading</button>
            <button class="filter-btn" data-filter="completed">Completed</button>
            <button class="filter-btn" data-filter="to_read">To Read</button>
          </div>
          <div id="booksList" class="learning-grid"></div>
        </div>

        <!-- Courses Subtab -->
        <div class="learning-subtab" id="subtab-courses">
          <div class="subtab-actions">
            <button class="btn-primary" id="addCourseBtn">+ Add Course</button>
          </div>
          <div class="learning-filters">
            <button class="filter-btn active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="in_progress">In Progress</button>
            <button class="filter-btn" data-filter="completed">Completed</button>
            <button class="filter-btn" data-filter="not_started">Not Started</button>
          </div>
          <div id="coursesList" class="learning-grid"></div>
        </div>

        <!-- Skills Subtab -->
        <div class="learning-subtab" id="subtab-skills">
          <div class="subtab-actions">
            <button class="btn-primary" id="addSkillBtn">+ Add Skill</button>
          </div>
          <div id="skillsList" class="learning-grid"></div>
        </div>

        <!-- Insights Subtab -->
        <div class="learning-subtab" id="subtab-insights">
          <div class="subtab-actions">
            <button class="btn-primary" id="addInsightBtn">+ Add Insight</button>
          </div>
          <div id="insightsList" class="learning-grid"></div>
        </div>

        <!-- Mistakes Subtab -->
        <div class="learning-subtab" id="subtab-mistakes">
          <div class="subtab-actions">
            <button class="btn-primary" id="addMistakeBtn">+ Add Mistake</button>
          </div>
          <div id="mistakesList" class="learning-grid"></div>
        </div>

        <!-- Weekly Goals Subtab -->
        <div class="learning-subtab" id="subtab-weekly">
          <div class="subtab-actions">
            <button class="btn-primary" id="addWeeklyGoalBtn">+ Add Weekly Goal</button>
          </div>
          <div class="learning-filters">
            <button class="filter-btn active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="in_progress">In Progress</button>
            <button class="filter-btn" data-filter="completed">Completed</button>
          </div>
          <div id="weeklyGoalsList" class="learning-grid"></div>
        </div>
      </section>
    </main>
  </div>

  <!-- Modal for adding/editing items -->
  <div class="modal" id="itemModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modalTitle">Add Item</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
      <div class="modal-footer">
        <button class="btn-secondary" id="modalCancel">Cancel</button>
        <button class="btn-primary" id="modalSave">Save</button>
      </div>
    </div>
  </div>

  <script src="modules/nova.js"></script>
</body>
</html>
